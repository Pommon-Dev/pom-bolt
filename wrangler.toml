# Cloudflare Pages Configuration
# This file configures how your application is deployed to Cloudflare Pages

#:schema node_modules/wrangler/config-schema.json
name = "pom-bolt"

# Enable Node.js compatibility mode for Cloudflare Workers
compatibility_flags = ["nodejs_compat"]

# Set the compatibility date for Cloudflare Workers features
compatibility_date = "2024-09-23"

# Specify the directory containing the built client files
pages_build_output_dir = "./build/client"

# Enable metrics collection for monitoring
send_metrics = true

# KV Namespace - Standard way to define for Workers
[[kv_namespaces]]
binding = "POM_BOLT_PROJECTS"
id = "dfe2d0d711d8469298b9ebe3c4d5f596"

[env.production]
# Define environment variables for production
NODE_ENV = "production"
ENVIRONMENT = "production"

# Also define KV namespace binding for preview environment
[env.preview]
# Define environment variables for preview
NODE_ENV = "production" 
ENVIRONMENT = "preview"

# Add KV binding to preview environment
[[env.preview.kv_namespaces]]
binding = "POM_BOLT_PROJECTS"
id = "dfe2d0d711d8469298b9ebe3c4d5f596"